{"ast":null,"code":"var _jsxFileName = \"/home/barnabas/Desktop/News API React/src/Components/Api/api.js\";\nimport React, { Component } from \"react\";\nimport loadingImage from \"../../Assets/loading3.gif\";\nimport Aside from \"./aside/aside.component.jsx\";\nimport Button from \"../Buttons/buttons\";\nimport { countryCodes } from \"../countries\";\nexport const API_KEY = \"5b039b929ba344409712522284841478\";\n\nclass ApiData extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      allNewsData: [],\n      dataLoaded: false,\n      value: \"\",\n      country: \"NG\",\n      category: \"Health\",\n      searchValue: \"\"\n    };\n\n    this.handleChange = ({\n      target: {\n        value,\n        name\n      }\n    }) => {\n      this.setState({\n        [name]: value\n      }, () => this.updateSearch());\n      console.log(`${[name]}:${value}`);\n    };\n\n    this.handleCategory = ({\n      target: {\n        value\n      }\n    }) => {\n      this.setState({\n        category: value\n      }, () => console.log(this.state.category));\n    };\n\n    this.matchQuery = () => {\n      const objKey = Object.keys(countryCodes);\n      const objData = objKey.filter(item => item.toLowerCase() === this.state.value.toLowerCase());\n      let countryCode = \"\";\n\n      for (let key in countryCodes) {\n        if (objData[0] === key) {\n          countryCode = countryCodes[key].split(\" \")[0];\n        }\n      }\n\n      console.log(countryCode);\n      return countryCode;\n    };\n\n    this.updateSearch = () => {\n      if (!this.state.value) return;\n      this.setState({\n        country: this.matchQuery()\n      });\n      console.log(this.state.country);\n    };\n\n    this.searchedValue = ({\n      target: {\n        value\n      }\n    }) => {\n      this.setState({\n        searchValue: value\n      }, console.log(this.state.searchValue));\n    };\n  }\n\n  async componentDidMount() {\n    // let url = `https://newsapi.org/v2/top-headlines?country=${this.state.country}&apiKey=${API_KEY}`;\n    let url = `http://newsapi.org/v2/top-headlines?country=${this.state.country}&category=${this.state.category}&apiKey=${API_KEY}`;\n    let req = new Request(url);\n    const res = await fetch(req);\n    const data = await res.json();\n    this.setState({\n      dataLoaded: true,\n      allNewsData: data\n    } // ()=> console.log(this.state.allNewsData)\n    );\n  } //this async/await lifecycle triggers when a value is entered and searched\n\n\n  async componentDidUpdate(prevProps, prevState) {\n    if (prevState.country !== this.state.country || prevState.category !== this.state.category) {\n      this.setState({\n        dataLoaded: false\n      });\n      const response = await fetch(`http://newsapi.org/v2/top-headlines?country=${this.state.country}&category=${this.state.category}&apiKey=${API_KEY}` // `https://newsapi.org/v2/top-headlines?country=${this.state.country}&apiKey=${API_KEY}`\n      ); //An update to the state with the newly fetched API data\n\n      const data = await response.json();\n      this.setState({\n        dataLoaded: true,\n        allNewsData: data\n      });\n    }\n  } //this function handles the new value entered to the 'search' input tag for country select\n\n\n  render() {\n    let {\n      searchValue,\n      dataLoaded,\n      allNewsData: {\n        articles\n      }\n    } = this.state; //this scren displays while the news content is still loading and disappears as soon as the content is loaded\n\n    if (!dataLoaded) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: \"max-content\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: \"500px\",\n          width: \"100%\",\n          display: \"flex\",\n          flexWrap: \"wrap\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          backgroundColor: \"#fafaf5\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\",\n          color: \"red\",\n          flexBasis: \"70%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: loadingImage,\n        alt: \"...\",\n        style: {\n          height: \"150px\",\n          width: \"200px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }\n      }, \"Loading...\")), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flexBasis: \"30%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Aside, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }\n      }))));\n    }\n\n    let filteredNews = articles.filter(article => article.title.toLowerCase().includes(searchValue.toLowerCase()));\n    console.log(articles);\n    return /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, \" \", /*#__PURE__*/React.createElement(Button, {\n      style: {\n        flexWrap: \"wrap\",\n        height: \"max-content\"\n      },\n      value: this.state.value,\n      handleCategory: this.handleCategory,\n      handleChange: this.handleChange,\n      searchValue: this.searchedValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        width: \"100%\",\n        flexWrap: \"wrap\",\n        marginTop: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: \"90vh\",\n        overflow: \"scroll\",\n        flexBasis: \"70%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexWrap: \"wrap\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, filteredNews.map(news => {\n      const {\n        author,\n        title,\n        url,\n        urlToImage,\n        publishedAt\n      } = news;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: Math.random(),\n        style: {\n          flexBasis: \"60%\",\n          // width: \"max-content\",\n          height: \"max-content\",\n          textAlign: \"center\",\n          margin: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          boxShadow: \"5px 5px 2px gray\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: url,\n        style: {\n          textDecoration: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 23\n        }\n      }, title), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 23\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n        src: urlToImage,\n        alt: \"\",\n        style: {\n          height: \"200px\",\n          width: \"250px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }\n      }), \" \"), /*#__PURE__*/React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 23\n        }\n      }, author), /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          marginTop: \"5px\",\n          float: \"left\",\n          color: \"darkblue\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 23\n        }\n      }, publishedAt), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          marginTop: \"5px\",\n          textDecoration: \"none\",\n          float: \"right\",\n          color: \"#bf3152\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 23\n        }\n      }, \">> Read more...\"))));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flexBasis: \"30%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Aside, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default ApiData;","map":{"version":3,"sources":["/home/barnabas/Desktop/News API React/src/Components/Api/api.js"],"names":["React","Component","loadingImage","Aside","Button","countryCodes","API_KEY","ApiData","state","allNewsData","dataLoaded","value","country","category","searchValue","handleChange","target","name","setState","updateSearch","console","log","handleCategory","matchQuery","objKey","Object","keys","objData","filter","item","toLowerCase","countryCode","key","split","searchedValue","componentDidMount","url","req","Request","res","fetch","data","json","componentDidUpdate","prevProps","prevState","response","render","articles","height","width","display","flexWrap","justifyContent","alignItems","backgroundColor","textAlign","color","flexBasis","filteredNews","article","title","includes","marginTop","overflow","map","news","author","urlToImage","publishedAt","Math","random","margin","boxShadow","textDecoration","float"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,YAAP,MAAyB,2BAAzB;AAEA,OAAOC,KAAP,MAAkB,6BAAlB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AAEA,SAASC,YAAT,QAA6B,cAA7B;AAEA,OAAO,MAAMC,OAAO,GAAG,kCAAhB;;AAEP,MAAMC,OAAN,SAAsBN,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC9BO,KAD8B,GACtB;AACNC,MAAAA,WAAW,EAAE,EADP;AAENC,MAAAA,UAAU,EAAE,KAFN;AAGNC,MAAAA,KAAK,EAAE,EAHD;AAINC,MAAAA,OAAO,EAAE,IAJH;AAKNC,MAAAA,QAAQ,EAAE,QALJ;AAMNC,MAAAA,WAAW,EAAE;AANP,KADsB;;AAAA,SA+C9BC,YA/C8B,GA+Cf,CAAC;AAAEC,MAAAA,MAAM,EAAE;AAAEL,QAAAA,KAAF;AAASM,QAAAA;AAAT;AAAV,KAAD,KAAiC;AAC9C,WAAKC,QAAL,CAAc;AAAE,SAACD,IAAD,GAAQN;AAAV,OAAd,EAAiC,MAAM,KAAKQ,YAAL,EAAvC;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAa,GAAE,CAACJ,IAAD,CAAO,IAAGN,KAAM,EAA/B;AACD,KAlD6B;;AAAA,SAqD9BW,cArD8B,GAqDb,CAAC;AAAEN,MAAAA,MAAM,EAAE;AAAEL,QAAAA;AAAF;AAAV,KAAD,KAA2B;AAC1C,WAAKO,QAAL,CAAc;AAAEL,QAAAA,QAAQ,EAAEF;AAAZ,OAAd,EAAmC,MAAMS,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWK,QAAvB,CAAzC;AACD,KAvD6B;;AAAA,SA2D9BU,UA3D8B,GA2DjB,MAAM;AACjB,YAAMC,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYrB,YAAZ,CAAf;AACA,YAAMsB,OAAO,GAAGH,MAAM,CAACI,MAAP,CACdC,IAAI,IAAIA,IAAI,CAACC,WAAL,OAAuB,KAAKtB,KAAL,CAAWG,KAAX,CAAiBmB,WAAjB,EADjB,CAAhB;AAIA,UAAIC,WAAW,GAAG,EAAlB;;AAEA,WAAK,IAAIC,GAAT,IAAgB3B,YAAhB,EAA8B;AAC5B,YAAIsB,OAAO,CAAC,CAAD,CAAP,KAAeK,GAAnB,EAAwB;AACtBD,UAAAA,WAAW,GAAG1B,YAAY,CAAC2B,GAAD,CAAZ,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAd;AACD;AACF;;AACDb,MAAAA,OAAO,CAACC,GAAR,CAAYU,WAAZ;AACA,aAAOA,WAAP;AACD,KA1E6B;;AAAA,SA6E9BZ,YA7E8B,GA6Ef,MAAM;AACnB,UAAI,CAAC,KAAKX,KAAL,CAAWG,KAAhB,EAAuB;AACvB,WAAKO,QAAL,CAAc;AACZN,QAAAA,OAAO,EAAE,KAAKW,UAAL;AADG,OAAd;AAGAH,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWI,OAAvB;AACD,KAnF6B;;AAAA,SAsF9BsB,aAtF8B,GAsFd,CAAC;AAAElB,MAAAA,MAAM,EAAE;AAAEL,QAAAA;AAAF;AAAV,KAAD,KAA2B;AACzC,WAAKO,QAAL,CAAc;AAAEJ,QAAAA,WAAW,EAAEH;AAAf,OAAd,EAAsCS,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWM,WAAvB,CAAtC;AACD,KAxF6B;AAAA;;AAUP,QAAjBqB,iBAAiB,GAAG;AACxB;AACA,QAAIC,GAAG,GAAI,+CAA8C,KAAK5B,KAAL,CAAWI,OAAQ,aAAY,KAAKJ,KAAL,CAAWK,QAAS,WAAUP,OAAQ,EAA9H;AACA,QAAI+B,GAAG,GAAG,IAAIC,OAAJ,CAAYF,GAAZ,CAAV;AACA,UAAMG,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAD,CAAvB;AACA,UAAMI,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AAEA,SAAKxB,QAAL,CACE;AACER,MAAAA,UAAU,EAAE,IADd;AAEED,MAAAA,WAAW,EAAEgC;AAFf,KADF,CAKE;AALF;AAOD,GAxB6B,CA0B9B;;;AACwB,QAAlBE,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AAC7C,QACEA,SAAS,CAACjC,OAAV,KAAsB,KAAKJ,KAAL,CAAWI,OAAjC,IACAiC,SAAS,CAAChC,QAAV,KAAuB,KAAKL,KAAL,CAAWK,QAFpC,EAGE;AACA,WAAKK,QAAL,CAAc;AAAER,QAAAA,UAAU,EAAE;AAAd,OAAd;AACA,YAAMoC,QAAQ,GAAG,MAAMN,KAAK,CACzB,+CAA8C,KAAKhC,KAAL,CAAWI,OAAQ,aAAY,KAAKJ,KAAL,CAAWK,QAAS,WAAUP,OAAQ,EAD1F,CAE1B;AAF0B,OAA5B,CAFA,CAMA;;AACA,YAAMmC,IAAI,GAAG,MAAMK,QAAQ,CAACJ,IAAT,EAAnB;AACA,WAAKxB,QAAL,CAAc;AACZR,QAAAA,UAAU,EAAE,IADA;AAEZD,QAAAA,WAAW,EAAEgC;AAFD,OAAd;AAID;AACF,GA5C6B,CA8C9B;;;AA4CAM,EAAAA,MAAM,GAAG;AACP,QAAI;AACFjC,MAAAA,WADE;AAEFJ,MAAAA,UAFE;AAGFD,MAAAA,WAAW,EAAE;AAAEuC,QAAAA;AAAF;AAHX,QAIA,KAAKxC,KAJT,CADO,CAOP;;AACA,QAAI,CAACE,UAAL,EAAiB;AACf,0BACE;AAAK,QAAA,KAAK,EAAE;AAAEuC,UAAAA,MAAM,EAAE;AAAV,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AACE,QAAA,KAAK,EAAE;AACLA,UAAAA,MAAM,EAAE,OADH;AAELC,UAAAA,KAAK,EAAE,MAFF;AAGLC,UAAAA,OAAO,EAAE,MAHJ;AAILC,UAAAA,QAAQ,EAAE,MAJL;AAKLC,UAAAA,cAAc,EAAE,QALX;AAMLC,UAAAA,UAAU,EAAE,QANP;AAOLC,UAAAA,eAAe,EAAE;AAPZ,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAWE;AACE,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE,QAAb;AAAuBC,UAAAA,KAAK,EAAE,KAA9B;AAAqCC,UAAAA,SAAS,EAAE;AAAhD,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGE;AACE,QAAA,GAAG,EAAExD,YADP;AAEE,QAAA,GAAG,EAAC,KAFN;AAGE,QAAA,KAAK,EAAE;AAAE+C,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,KAAK,EAAE;AAA1B,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF,CAXF,eAqBE;AAAK,QAAA,KAAK,EAAE;AAAEQ,UAAAA,SAAS,EAAE;AAAb,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CArBF,CAFF,CADF;AA8BD;;AAED,QAAIC,YAAY,GAAGX,QAAQ,CAACpB,MAAT,CAAgBgC,OAAO,IACxCA,OAAO,CAACC,KAAR,CAAc/B,WAAd,GAA4BgC,QAA5B,CAAqChD,WAAW,CAACgB,WAAZ,EAArC,CADiB,CAAnB;AAGAV,IAAAA,OAAO,CAACC,GAAR,CAAY2B,QAAZ;AAEA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,eAGE,oBAAC,MAAD;AACE,MAAA,KAAK,EAAE;AAAEI,QAAAA,QAAQ,EAAE,MAAZ;AAAoBH,QAAAA,MAAM,EAAE;AAA5B,OADT;AAEE,MAAA,KAAK,EAAE,KAAKzC,KAAL,CAAWG,KAFpB;AAGE,MAAA,cAAc,EAAE,KAAKW,cAHvB;AAIE,MAAA,YAAY,EAAE,KAAKP,YAJrB;AAKE,MAAA,WAAW,EAAE,KAAKmB,aALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,eAUE;AACE,MAAA,KAAK,EAAE;AACLiB,QAAAA,OAAO,EAAE,MADJ;AAELE,QAAAA,cAAc,EAAE,QAFX;AAGLH,QAAAA,KAAK,EAAE,MAHF;AAILE,QAAAA,QAAQ,EAAE,MAJL;AAKLW,QAAAA,SAAS,EAAE;AALN,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBASE;AACE,MAAA,KAAK,EAAE;AACLd,QAAAA,MAAM,EAAE,MADH;AAELe,QAAAA,QAAQ,EAAE,QAFL;AAGLN,QAAAA,SAAS,EAAE,KAHN;AAILP,QAAAA,OAAO,EAAE,MAJJ;AAKLE,QAAAA,cAAc,EAAE,QALX;AAMLD,QAAAA,QAAQ,EAAE;AANL,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAWGO,YAAY,CAACM,GAAb,CAAiBC,IAAI,IAAI;AACxB,YAAM;AAAEC,QAAAA,MAAF;AAAUN,QAAAA,KAAV;AAAiBzB,QAAAA,GAAjB;AAAsBgC,QAAAA,UAAtB;AAAkCC,QAAAA;AAAlC,UAAkDH,IAAxD;AACA,0BACE;AACE,QAAA,GAAG,EAAEI,IAAI,CAACC,MAAL,EADP;AAEE,QAAA,KAAK,EAAE;AACLb,UAAAA,SAAS,EAAE,KADN;AAEL;AACAT,UAAAA,MAAM,EAAE,aAHH;AAILO,UAAAA,SAAS,EAAE,QAJN;AAKLgB,UAAAA,MAAM,EAAE;AALH,SAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAUE;AAAK,QAAA,KAAK,EAAE;AAAEtB,UAAAA,KAAK,EAAE,MAAT;AAAiBuB,UAAAA,SAAS,EAAE;AAA5B,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,IAAI,EAAErC,GAAT;AAAc,QAAA,KAAK,EAAE;AAAEsC,UAAAA,cAAc,EAAE;AAAlB,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKb,KAAL,CADF,eAEE;AAAK,QAAA,KAAK,EAAE;AAAEX,UAAAA,KAAK,EAAE,MAAT;AAAiBM,UAAAA,SAAS,EAAE;AAA5B,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,GADH,eAEE;AACE,QAAA,GAAG,EAAEY,UADP;AAEE,QAAA,GAAG,EAAC,EAFN;AAGE,QAAA,KAAK,EAAE;AAAEnB,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,KAAK,EAAE;AAA1B,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAMK,GANL,CAFF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKiB,MAAL,CAVF,eAWE;AACE,QAAA,KAAK,EAAE;AACLJ,UAAAA,SAAS,EAAE,KADN;AAELY,UAAAA,KAAK,EAAE,MAFF;AAGLlB,UAAAA,KAAK,EAAE;AAHF,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOGY,WAPH,CAXF,eAoBE;AACE,QAAA,KAAK,EAAE;AACLN,UAAAA,SAAS,EAAE,KADN;AAELW,UAAAA,cAAc,EAAE,MAFX;AAGLC,UAAAA,KAAK,EAAE,OAHF;AAILlB,UAAAA,KAAK,EAAE;AAJF,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BApBF,CADF,CAVF,CADF;AA8CD,KAhDA,CAXH,CATF,eAsEE;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAtEF,CAVF,CADF;AAuFD;;AA/N6B;;AAiOhC,eAAenD,OAAf","sourcesContent":["import React, { Component } from \"react\";\n\nimport loadingImage from \"../../Assets/loading3.gif\";\n\nimport Aside from \"./aside/aside.component.jsx\";\nimport Button from \"../Buttons/buttons\";\n\nimport { countryCodes } from \"../countries\";\n\nexport const API_KEY = \"5b039b929ba344409712522284841478\";\n\nclass ApiData extends Component {\n  state = {\n    allNewsData: [],\n    dataLoaded: false,\n    value: \"\",\n    country: \"NG\",\n    category: \"Health\",\n    searchValue: \"\"\n  };\n\n  async componentDidMount() {\n    // let url = `https://newsapi.org/v2/top-headlines?country=${this.state.country}&apiKey=${API_KEY}`;\n    let url = `http://newsapi.org/v2/top-headlines?country=${this.state.country}&category=${this.state.category}&apiKey=${API_KEY}`;\n    let req = new Request(url);\n    const res = await fetch(req);\n    const data = await res.json();\n\n    this.setState(\n      {\n        dataLoaded: true,\n        allNewsData: data\n      }\n      // ()=> console.log(this.state.allNewsData)\n    );\n  }\n\n  //this async/await lifecycle triggers when a value is entered and searched\n  async componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.country !== this.state.country ||\n      prevState.category !== this.state.category\n    ) {\n      this.setState({ dataLoaded: false });\n      const response = await fetch(\n        `http://newsapi.org/v2/top-headlines?country=${this.state.country}&category=${this.state.category}&apiKey=${API_KEY}`\n        // `https://newsapi.org/v2/top-headlines?country=${this.state.country}&apiKey=${API_KEY}`\n      );\n      //An update to the state with the newly fetched API data\n      const data = await response.json();\n      this.setState({\n        dataLoaded: true,\n        allNewsData: data\n      });\n    }\n  }\n\n  //this function handles the new value entered to the 'search' input tag for country select\n  handleChange = ({ target: { value, name } }) => {\n    this.setState({ [name]: value }, () => this.updateSearch());\n    console.log(`${[name]}:${value}`);\n  };\n\n  //this function handles the new value entered to the 'search' input tag for category select\n  handleCategory = ({ target: { value } }) => {\n    this.setState({ category: value }, () => console.log(this.state.category));\n  };\n\n  //Supper algorithm, thanks to Chibuike and George, we got this algorithm from Chibuike written by George\n  // this function has access to country/country codes data from the country component. It looks for the current input value and finds a match in the countries component object. It then gets the corresponding initials of the matched country and returns it */\n  matchQuery = () => {\n    const objKey = Object.keys(countryCodes);\n    const objData = objKey.filter(\n      item => item.toLowerCase() === this.state.value.toLowerCase()\n    );\n\n    let countryCode = \"\";\n\n    for (let key in countryCodes) {\n      if (objData[0] === key) {\n        countryCode = countryCodes[key].split(\" \")[0];\n      }\n    }\n    console.log(countryCode);\n    return countryCode;\n  };\n\n  //this function fires when the 'search' button is clicked. it updates the country state with the returned value from the matchquery function. this updated state serves as a query for the searched country\n  updateSearch = () => {\n    if (!this.state.value) return;\n    this.setState({\n      country: this.matchQuery()\n    });\n    console.log(this.state.country);\n  };\n\n  //his function gts the input value from button componenet and update the state with it.\n  searchedValue = ({ target: { value } }) => {\n    this.setState({ searchValue: value }, console.log(this.state.searchValue));\n  };\n\n  render() {\n    let {\n      searchValue,\n      dataLoaded,\n      allNewsData: { articles }\n    } = this.state;\n\n    //this scren displays while the news content is still loading and disappears as soon as the content is loaded\n    if (!dataLoaded) {\n      return (\n        <div style={{ height: \"max-content\" }}>\n          <Button />\n          <div\n            style={{\n              height: \"500px\",\n              width: \"100%\",\n              display: \"flex\",\n              flexWrap: \"wrap\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              backgroundColor: \"#fafaf5\"\n            }}\n          >\n            <div\n              style={{ textAlign: \"center\", color: \"red\", flexBasis: \"70%\" }}\n            >\n              <img\n                src={loadingImage}\n                alt=\"...\"\n                style={{ height: \"150px\", width: \"200px\" }}\n              />\n              <div>Loading...</div>\n            </div>\n            <div style={{ flexBasis: \"30%\" }}>\n              <Aside />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    let filteredNews = articles.filter(article =>\n      article.title.toLowerCase().includes(searchValue.toLowerCase())\n    );\n    console.log(articles);\n\n    return (\n      <section>\n        {\" \"}\n        {/* this Button was imported from button.jsx and we passed props to it to get the values w used to update our state(country and category)*/}\n        <Button\n          style={{ flexWrap: \"wrap\", height: \"max-content\" }}\n          value={this.state.value}\n          handleCategory={this.handleCategory}\n          handleChange={this.handleChange}\n          searchValue={this.searchedValue}\n        />\n        <main\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            width: \"100%\",\n            flexWrap: \"wrap\",\n            marginTop: \"10px\"\n          }}\n        >\n          <div\n            style={{\n              height: \"90vh\",\n              overflow: \"scroll\",\n              flexBasis: \"70%\",\n              display: \"flex\",\n              justifyContent: \"center\",\n              flexWrap: \"wrap\"\n            }}\n          >\n            {/**mapping through the already fetched data in the state to display desired information */}\n            {filteredNews.map(news => {\n              const { author, title, url, urlToImage, publishedAt } = news;\n              return (\n                <div\n                  key={Math.random()}\n                  style={{\n                    flexBasis: \"60%\",\n                    // width: \"max-content\",\n                    height: \"max-content\",\n                    textAlign: \"center\",\n                    margin: \"10px\"\n                  }}\n                >\n                  <div style={{ width: \"100%\", boxShadow: \"5px 5px 2px gray\" }}>\n                    <a href={url} style={{ textDecoration: \"none\" }}>\n                      <h3>{title}</h3>\n                      <div style={{ width: \"100%\", textAlign: \"center\" }}>\n                        {\" \"}\n                        <img\n                          src={urlToImage}\n                          alt=\"\"\n                          style={{ height: \"200px\", width: \"250px\" }}\n                        />{\" \"}\n                      </div>\n                      <h6>{author}</h6>\n                      <h6\n                        style={{\n                          marginTop: \"5px\",\n                          float: \"left\",\n                          color: \"darkblue\"\n                        }}\n                      >\n                        {publishedAt}\n                      </h6>\n                      <p\n                        style={{\n                          marginTop: \"5px\",\n                          textDecoration: \"none\",\n                          float: \"right\",\n                          color: \"#bf3152\"\n                        }}\n                      >\n                        >> Read more...\n                      </p>\n                    </a>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div style={{ flexBasis: \"30%\" }}>\n            <Aside />\n          </div>\n        </main>\n      </section>\n    );\n  }\n}\nexport default ApiData;\n"]},"metadata":{},"sourceType":"module"}